<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("./partials/head") %>
    <title><%= user.fullname %>'s Profile</title>

    <style>
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .profile-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ccc;
        }

        .user-info {
            flex-grow: 1;
        }

        .user-info h2 {
            margin: 0;
        }

        .blog-card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .blog-card-img {
            object-fit: cover;
            height: 180px;
            width: 100%;
        }

        .blog-card-body {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }
    </style>
</head>

<body>
    <%- include("./partials/nav") %>

    <div class="container mt-4">
        <!-- Profile Header -->
        <div class="profile-header">
            <img src="<%= user.profileImageURL %>" class="profile-image" />
            <div class="user-info">
                <h2><%= user.fullname %></h2>
                <p><strong>Email:</strong> <%= user.email %></p>
                <p><strong>Role:</strong> <%= user.role %></p>
                <p><strong>Total Blogs:</strong> <%= user.blogs.length %></p>
            </div>
        </div>

        <!-- User's Blogs -->
        <h4 class="mb-3">My Blogs</h4>
        <% if (user.blogs.length === 0) { %>
            <p>No blogs created yet. <a href="/blog/add-blog">Write your first blog!</a></p>
        <% } else { %>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
                <% user.blogs.forEach(blog => { %>
                    <div class="col">
                        <div class="card blog-card shadow-sm">
                            <img src="<%= blog.coverImageURL %>" class="card-img-top blog-card-img" alt="Blog image">
                            <div class="card-body blog-card-body">
                                <div>
                                    <h5 class="card-title"><%= blog.title %></h5>
                                </div>
                                <a href="/blog/<%= blog._id %>" class="btn btn-outline-primary w-100 mt-auto">Read More</a>
                            </div>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } %>
    </div>

    <%- include("./partials/scripts") %>
</body>

</html>
